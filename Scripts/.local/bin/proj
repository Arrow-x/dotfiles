#!/bin/sh

terminal="footclient -D"
editor="footclient nvim"
menu() {
	if [ -n "$(pgrep bemenu)" ]; then
		exit
	fi
	bemenu -l 20 -p Projects:
}

search="$(find -L "/home/arrowx/Public" "/home/arrowx/File/Projects/Godot" "/home/arrowx/File/Projects/Scripts" -mindepth 1  -maxdepth 1 -type d | menu)"

if [ -z "$search" ]; then
	exit
fi

tmux_running=$(pgrep tmux)

if [ "$TMUX" ] && [ "$tmux_running" ]; then
	search_name=$(basename "$search")
	tmux rename-window "$search_name"
fi
case "$1" in
	-n | --neovim) $editor "$search" & ;;
	-c | --change-dir) $terminal "$search" & ;;
	*) exit ;;
esac
